<!--
  Generated template for the VerPratoPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

    <ion-navbar color="{{selectedTheme}}">
        <ion-title text-left>Seu prato</ion-title>
        <ion-buttons end>
            <button *ngIf="!loading" [disabled]="!foods || foods.length == 0 || popupOpen || popupCheck" (tap)="presentConfirm()" ion-button>
                <ion-note item-end color="primary">Confirmar</ion-note>
            </button>

            <button *ngIf="loading" ion-button>
                <ion-note item-end color="white"><ion-spinner color="primary"></ion-spinner></ion-note>
            </button>
          </ion-buttons>
      </ion-navbar>

</ion-header>


<ion-content class="outer-content" style="margin-top: 2px;">
  

    <!-- <ion-searchbar
    [(ngModel)]="searchInput.searchText"
    [showCancelButton]="searchInput.shouldShowCancel"
    (ionInput)="onInput($event)"
    (ionCancel)="onCancel($event)"
    placeholder="Buscar">
  </ion-searchbar> -->

    <ion-list *ngIf="foods && foods.length > 0">
    
        <div [class.active]="food.selected" (tap)="selectFood(food)" *ngFor="let food of foods; let i = index">
    
    
          <ion-item>
            <ion-avatar item-start>
              <img [src]="food.img_url">
            </ion-avatar>
            <h2>{{food.nome}}</h2>
            <p *ngIf="food.porcao_comida > 0" color="primary">{{food.porcao_comida}} g</p>
            <ion-icon *ngIf="food.porcao_comida > 0" name="checkmark" color="primary" item-end></ion-icon>
            <ion-icon  *ngIf="!food.porcao_comida || food.porcao_comida <= 0" name="ios-arrow-down" color="lightgray" item-end></ion-icon>
          </ion-item>
    
    
          <div *ngIf="food.selected" class="food-select-dropdown active-food-select-dropdown">
            <ion-list-header>
              Quantidade (em gramas)
              <ion-badge item-end *ngIf="food.porcao_comida">{{food.porcao_comida}} g</ion-badge>
            </ion-list-header>
            <ion-item>
              <ion-range  min="0" max="1000" [(ngModel)]="food.porcao_comida" (ngModelChange)="mudarPorcao($event, food)" color="secondary">
                <ion-label range-left>0</ion-label>
                <ion-label range-right>1000</ion-label>
              </ion-range>
            </ion-item>
          </div>
    
    
    
        </div>
    
      </ion-list>
    
      <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
      </ion-infinite-scroll>

      <modal *ngIf="popupOpen" [loading]="loading" [btnConfirm]="'Confirmar'"
      (onCancel)="popupOpen = false" (onConfirm)="montarPrato()" [text]="confirmText"
      [title]="refeicao.ds_refeicao"></modal>

      <modal *ngIf="popupCheck" [btnConfirm]="'Ver prato'" type="check"
      (onConfirm)="verPrato()" [text]="checkText"
      [title]="'ConcluÃ­do!'"></modal>

</ion-content>
